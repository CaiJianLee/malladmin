{"remainingRequest":"/Users/caijianli/Desktop/malladmin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/caijianli/Desktop/malladmin/src/components/imageUpload/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/caijianli/Desktop/malladmin/src/components/imageUpload/index.vue","mtime":1582099472000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHsgQ29tcHJlc3NvckltZyB9IGZyb20gIkAvY29tbW9udXRpbHMvY29tcHJlc3NvciI7DQppbXBvcnQgeyBPc3NSZXF1c2V0IH0gZnJvbSAiQC9jb21tb251dGlscy9hbGlPU1MiOw0KaW1wb3J0IHsgZXJyb3JNc2csIHV1aWQsIHdhcm5pbmdNc2cgfSBmcm9tICJAL2NvbW1vbnV0aWxzL2NvbW1vbiI7DQppbXBvcnQgZHJhZ2dhYmxlIGZyb20gInZ1ZWRyYWdnYWJsZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImltYWdlVXBsb2FkIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbm9JbWc6IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9ub0ltZy5qcGciKSwNCiAgICAgIGltYWdlVXJsOiAiIiwNCiAgICAgIGltYWdlTGlzdDogW10sDQogICAgICBkcmFnOiBmYWxzZSwNCiAgICAgIGNsaWVudDogbnVsbA0KICAgIH07DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBkcmFnZ2FibGUNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBpc1Nob3dUaXA6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICB3aWR0aDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIjE0OHB4Ig0KICAgIH0sDQogICAgaGVpZ2h0OiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiMTQ4cHgiDQogICAgfSwNCiAgICBzaXplOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIHdpZHRoOiA3NTAsDQogICAgICAgICAgaGVpZ2h0OiA3NTANCiAgICAgICAgfTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzTXVsdGk6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0sDQogICAgaW1hZ2U6IFtTdHJpbmcsIEFycmF5XQ0KICB9LA0KICB3YXRjaDogew0KICAgIGltYWdlOiB7DQogICAgICBoYW5kbGVyKHZhbCkgew0KICAgICAgICBpZiAodGhpcy5pc011bHRpKSB7DQogICAgICAgICAgdGhpcy5pbWFnZUxpc3QgPSB2YWw7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5pbWFnZVVybCA9IHZhbDsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZShbInVzZXIiLCAiYWxpeXVuT3NzIl0pLA0KICAgIC8qKg0KICAgICAqIOaLluaLvQ0KICAgICAqIEByZXR1cm5zIHt7Z2hvc3RDbGFzczogc3RyaW5nLCBkaXNhYmxlZDogYm9vbGVhbiwgYW5pbWF0aW9uOiBudW1iZXIsIGdyb3VwOiBzdHJpbmd9fSDmi5bmi73kv6Hmga8NCiAgICAgKi8NCiAgICBkcmFnT3B0aW9ucygpIHsNCiAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKTsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGFuaW1hdGlvbjogNTAwLA0KICAgICAgICBncm91cDogImRlc2NyaXB0aW9uIiwNCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgICBnaG9zdENsYXNzOiAiZ2hvc3QiDQogICAgICB9Ow0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qKg0KICAgICAqIOabtOaWsOeItue7hOS7tuWbvueJhw0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqLw0KICAgIHVwZGF0ZUltYWdlKCkgew0KICAgICAgdGhpcy4kZW1pdCgidXBkYXRlOmltYWdlIiwgdGhpcy5pc011bHRpID8gdGhpcy5pbWFnZUxpc3QgOiB0aGlzLmltYWdlVXJsKTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOWIoOmZpOWVhuWTgeS4u+Wbvg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwNCiAgICAgKiBAcmV0dXJucyB7dm9pZH0NCiAgICAgKi8NCiAgICBkZWxJbWcodmFsKSB7DQogICAgICB0aGlzLmltYWdlTGlzdCA9IHRoaXMuaW1hZ2VMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IHZhbCk7DQogICAgICB0aGlzLnVwZGF0ZUltYWdlKCk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDlm77niYfkuIrkvKDkuYvliY0NCiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmlsZQ0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IOi/lOWbnuaYr+WQpuS4iuS8oOeKtuaAgQ0KICAgICAqLw0KICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7DQogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gImltYWdlL2pwZWciIHx8IGZpbGUudHlwZSA9PT0gImltYWdlL3BuZyI7IC8vIOWbvueJh+exu+Weiw0KICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCA1OyAvLyDlm77niYflpKflsI8NCiAgICAgIC8vIGNvbnN0IGZpbGVMZW4gPSB0aGlzLmZvcm0uaW1nTGlzdC5sZW5ndGggPCA1OyAvLyDmnIDlpJrkuIrkvKDmlbDph48NCiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5zaXplLndpZHRoOyAvLyDlm77niYflrr0NCiAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuc2l6ZS5oZWlnaHQ7IC8vIOWbvueJh+mrmA0KICAgICAgaWYgKCFpc0pQRykgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlhoXlrrnkuLvlm77lj6rog73mmK8gSlBH5oiW6ICFUE5HIOagvOW8jyEiKTsNCiAgICAgIH0NCiAgICAgIGlmICghaXNMdDJNKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWGheWuueS4u+WbvuWkp+Wwj+S4jeiDvei2hei/hyA1TUIhIik7DQogICAgICB9DQogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgICAgIGNvbnN0IGlzU2l6ZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICBsZXQgX1VSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsNCiAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpOw0KICAgICAgICBpbWcub25sb2FkID0gKCkgPT4gew0KICAgICAgICAgIGxldCB2YWxpZCA9IGltZy53aWR0aCA9PT0gd2lkdGggJiYgaW1nLmhlaWdodCA9PT0gaGVpZ2h0Ow0KICAgICAgICAgIHZhbGlkID8gcmVzb2x2ZSgpIDogcmVqZWN0KCk7DQogICAgICAgIH07DQogICAgICAgIGltZy5zcmMgPSBfVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsNCiAgICAgIH0pLnRoZW4oDQogICAgICAgICgpID0+IHsNCiAgICAgICAgICByZXR1cm4gZmlsZTsNCiAgICAgICAgfSwNCiAgICAgICAgKCkgPT4gew0KICAgICAgICAgIHdhcm5pbmdNc2coDQogICAgICAgICAgICBfdGhpcywNCiAgICAgICAgICAgIGDlm77niYflsLrlr7jpmZDliLbkuLoke3RoaXMuc2l6ZS53aWR0aH0geCAke3RoaXMuc2l6ZS5oZWlnaHR977yM6K+36YeN5paw5LiK5LygYA0KICAgICAgICAgICk7DQogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KA0KICAgICAgICAgICAgYOWbvueJh+WwuuWvuOmZkOWItuS4uiR7dGhpcy5zaXplLndpZHRofSB4ICR7dGhpcy5zaXplLmhlaWdodH3vvIzor7fph43mlrDkuIrkvKBgDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIHJldHVybiBpc0pQRyAmJiBpc0x0Mk0gJiYgaXNTaXplOw0KICAgIH0sDQogICAgLyoqDQogICAgICog5re75Yqg5YaF5a655Li75Zu+5oiQ5Yqf5pe26L+U5ZueDQogICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGUNCiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWxlTGlzdA0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqLw0KICAgIGFzeW5jIHBpY3R1cmVTZWxlY3QoZmlsZSkgew0KICAgICAgaWYgKCEoYXdhaXQgdGhpcy5iZWZvcmVBdmF0YXJVcGxvYWQoZmlsZS5yYXcpKSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IENvbXByZXNzb3JJbWcoZmlsZS5yYXcpOw0KICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgT3NzUmVxdXNldCgpOw0KICAgICAgY29uc3QgX29iaiA9IHRoaXMuYWxpeXVuT3NzLmltZ1BhdGggKyAiLyIgKyB1dWlkKCk7DQogICAgICBjbGllbnQNCiAgICAgICAgLnB1dChfb2JqLCBpbWFnZSkNCiAgICAgICAgLnRoZW4ocjEgPT4gew0KICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGkpIHsNCiAgICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0LnB1c2godGhpcy5hbGl5dW5Pc3MuaW1nSG9zdCArIHIxLm5hbWUpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmltYWdlVXJsID0gdGhpcy5hbGl5dW5Pc3MuaW1nSG9zdCArIHIxLm5hbWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgZXJyb3JNc2codGhpcywgZXJyKTsNCiAgICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/imageUpload","sourcesContent":["<template>\r\n  <div class=\"imageUpload\">\r\n    <div class=\"uploader-layout\">\r\n      <template v-if=\"isMulti\">\r\n        <draggable\r\n          class=\"el-upload-list el-upload-list--picture-card\"\r\n          tag=\"ul\"\r\n          v-if=\"imageList.length\"\r\n          v-model=\"imageList\"\r\n          v-bind=\"dragOptions\"\r\n          @start=\"drag = true\"\r\n          @end=\"drag = false\"\r\n        >\r\n          <li\r\n            class=\"el-upload-list__item\"\r\n            :class=\"{ isDrap: drag }\"\r\n            v-for=\"(item, index) in imageList\"\r\n            :key=\"index\"\r\n          >\r\n            <el-image\r\n              style=\"width: 148px; height: 148px; cursor: move\"\r\n              :src=\"item\"\r\n              fit=\"contain\"\r\n            >\r\n              <div slot=\"placeholder\" class=\"image-slot\">\r\n                图片加载中<span class=\"el-icon-loading\"></span>\r\n              </div>\r\n            </el-image>\r\n            <i\r\n              class=\"el-icon-error btn\"\r\n              @click=\"delImg(item)\"\r\n              title=\"删除图片\"\r\n            />\r\n          </li>\r\n        </draggable>\r\n        <el-upload\r\n          v-if=\"imageList.length < 5\"\r\n          class=\"avatar-uploader\"\r\n          action=\"\"\r\n          :auto-upload=\"false\"\r\n          accept=\".jpg,.png\"\r\n          :on-change=\"pictureSelect\"\r\n          :show-file-list=\"false\"\r\n        >\r\n          <div class=\"el-upload--picture-card\">\r\n            <i class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </div>\r\n        </el-upload>\r\n      </template>\r\n      <template v-else>\r\n        <el-upload\r\n          :style=\"{width: width, height: height}\"\r\n          class=\"avatar-uploader\"\r\n          action=\"\"\r\n          :auto-upload=\"false\"\r\n          accept=\".jpg,.png\"\r\n          :on-change=\"pictureSelect\"\r\n          :show-file-list=\"false\"\r\n        >\r\n          <div\r\n            class=\"el-upload--picture-card\"\r\n            :style=\"{ width: width, height: height }\"\r\n            title=\"点击上传图片\"\r\n          >\r\n            <el-image\r\n              class=\"article-img\"\r\n              v-if=\"imageUrl\"\r\n              style=\"width: 100%; height: 100%;\"\r\n              :src=\"imageUrl\"\r\n              fit=\"scale-down\"\r\n            >\r\n              <div slot=\"error\" class=\"image-slot\" title=\"图片加载失败\">\r\n                <img :src=\"noImg\" width=\"100%\" />\r\n                <!-- <span>图片加载失败</span> -->\r\n              </div>\r\n              <div slot=\"placeholder\" class=\"image-slot\">\r\n                图片加载中<span class=\"el-icon-loading\"></span>\r\n              </div>\r\n            </el-image>\r\n            <div v-else class=\"upload-tip\">\r\n              <i class=\"el-icon-plus avatar-uploader-icon\" />\r\n<!--              <font size=\"1\"-->\r\n<!--                >(仅限上传尺寸:1920x1080，大小不超过1M的图片文件)</font-->\r\n<!--              >-->\r\n            </div>\r\n          </div>\r\n        </el-upload>\r\n      </template>\r\n    </div>\r\n    <div class=\"tip-text\" v-if=\"isShowTip\">\r\n      最多上传{{ isMulti ? 5 : 1 }}张图片，建议尺寸{{ size.width }} x\r\n      {{ size.height }} 像素，图片大小不能超过5MB；\r\n      <span v-if=\"isMulti\">你可以左右拖拽图片调整图片顺序</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport { CompressorImg } from \"@/commonutils/compressor\";\r\nimport { OssRequset } from \"@/commonutils/aliOSS\";\r\nimport { errorMsg, uuid, warningMsg } from \"@/commonutils/common\";\r\nimport draggable from \"vuedraggable\";\r\n\r\nexport default {\r\n  name: \"imageUpload\",\r\n  data() {\r\n    return {\r\n      noImg: require(\"@/assets/images/noImg.jpg\"),\r\n      imageUrl: \"\",\r\n      imageList: [],\r\n      drag: false,\r\n      client: null\r\n    };\r\n  },\r\n  components: {\r\n    draggable\r\n  },\r\n  props: {\r\n    isShowTip: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    width: {\r\n      type: String,\r\n      default: \"148px\"\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: \"148px\"\r\n    },\r\n    size: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: 750,\r\n          height: 750\r\n        };\r\n      }\r\n    },\r\n    isMulti: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    image: [String, Array]\r\n  },\r\n  watch: {\r\n    image: {\r\n      handler(val) {\r\n        if (this.isMulti) {\r\n          this.imageList = val;\r\n        } else {\r\n          this.imageUrl = val;\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\"user\", \"aliyunOss\"]),\r\n    /**\r\n     * 拖拽\r\n     * @returns {{ghostClass: string, disabled: boolean, animation: number, group: string}} 拖拽信息\r\n     */\r\n    dragOptions() {\r\n      this.updateImage();\r\n      return {\r\n        animation: 500,\r\n        group: \"description\",\r\n        disabled: false,\r\n        ghostClass: \"ghost\"\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 更新父组件图片\r\n     * @returns {void}\r\n     */\r\n    updateImage() {\r\n      this.$emit(\"update:image\", this.isMulti ? this.imageList : this.imageUrl);\r\n    },\r\n    /**\r\n     * 删除商品主图\r\n     * @param {Object} val\r\n     * @returns {void}\r\n     */\r\n    delImg(val) {\r\n      this.imageList = this.imageList.filter(item => item !== val);\r\n      this.updateImage();\r\n    },\r\n    /**\r\n     * 图片上传之前\r\n     * @param {Object} file\r\n     * @returns {Promise<Object>} 返回是否上传状态\r\n     */\r\n    beforeAvatarUpload(file) {\r\n      const _this = this;\r\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\"; // 图片类型\r\n      const isLt2M = file.size / 1024 / 1024 < 5; // 图片大小\r\n      // const fileLen = this.form.imgList.length < 5; // 最多上传数量\r\n      const width = this.size.width; // 图片宽\r\n      const height = this.size.height; // 图片高\r\n      if (!isJPG) {\r\n        this.$message.error(\"内容主图只能是 JPG或者PNG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"内容主图大小不能超过 5MB!\");\r\n      }\r\n      // eslint-disable-next-line no-unused-vars\r\n      const isSize = new Promise(function(resolve, reject) {\r\n        let _URL = window.URL || window.webkitURL;\r\n        let img = new Image();\r\n        img.onload = () => {\r\n          let valid = img.width === width && img.height === height;\r\n          valid ? resolve() : reject();\r\n        };\r\n        img.src = _URL.createObjectURL(file);\r\n      }).then(\r\n        () => {\r\n          return file;\r\n        },\r\n        () => {\r\n          warningMsg(\r\n            _this,\r\n            `图片尺寸限制为${this.size.width} x ${this.size.height}，请重新上传`\r\n          );\r\n          return Promise.reject(\r\n            `图片尺寸限制为${this.size.width} x ${this.size.height}，请重新上传`\r\n          );\r\n        }\r\n      );\r\n      return isJPG && isLt2M && isSize;\r\n    },\r\n    /**\r\n     * 添加内容主图成功时返回\r\n     * @param {Object} file\r\n     * @param {Array} fileList\r\n     * @returns {void}\r\n     */\r\n    async pictureSelect(file) {\r\n      if (!(await this.beforeAvatarUpload(file.raw))) {\r\n        return;\r\n      }\r\n      const image = await CompressorImg(file.raw);\r\n      const client = await OssRequset();\r\n      const _obj = this.aliyunOss.imgPath + \"/\" + uuid();\r\n      client\r\n        .put(_obj, image)\r\n        .then(r1 => {\r\n          if (this.isMulti) {\r\n            this.imageList.push(this.aliyunOss.imgHost + r1.name);\r\n          } else {\r\n            this.imageUrl = this.aliyunOss.imgHost + r1.name;\r\n          }\r\n          this.updateImage();\r\n        })\r\n        .catch(err => {\r\n          errorMsg(this, err);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped src=\"./_imageUpload.scss\" />\r\n"]}]}