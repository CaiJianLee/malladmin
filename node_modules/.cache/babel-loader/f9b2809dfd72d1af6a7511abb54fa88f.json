{"remainingRequest":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js!/Users/caijianli/Desktop/malladmin/node_modules/eslint-loader/index.js??ref--13-0!/Users/caijianli/Desktop/malladmin/src/api/ajax.js","dependencies":[{"path":"/Users/caijianli/Desktop/malladmin/src/api/ajax.js","mtime":1582099472000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWludCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3RvcmFnZVV0aWxzIGZyb20gIkAvY29tbW9udXRpbHMvc3RvcmFnZVV0aWxzIjsKaW1wb3J0IERvbk1lc3NhZ2UgZnJvbSAiQC9jb21tb251dGlscy9tZXNzYWdlIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CnZhciBNZXNzYWdlID0gbmV3IERvbk1lc3NhZ2UoKTsKLyoqDQogKiDlnKjmjqXlj6PliY3nu5/kuIDmt7vliqB0b2tlbg0KICovCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHZhciBzdG9yYWdlX3VzZXIgPSBzdG9yYWdlVXRpbHMuZ2V0VXNlcigpOwoKICBpZiAoc3RvcmFnZV91c2VyICYmIGNvbmZpZy5kYXRhKSB7CiAgICBpZiAoIWNvbmZpZy5kYXRhLnRva2VuIHx8IEpTT04uc3RyaW5naWZ5KGNvbmZpZy5kYXRhLnRva2VuKSA9PT0gInt9IikgewogICAgICBjb25maWcuZGF0YS50b2tlbiA9IHN0b3JhZ2VfdXNlci50b2tlbjsKICAgIH0KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7Ci8qKg0KICogaHR0cOivt+axgueKtuaAgeeggeaLpuaIqg0KICovCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGlmIChyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gcGFyc2VJbnQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0VSUl9UT0tFTl9DT0RFKSkgewogICAgTWVzc2FnZS53YXJuaW5nKCLnmbvlvZXkv6Hmga/lt7Lov4fmnJ/vvIzor7fph43mlrDnmbvlvZUiKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgcGF0aDogIi9sb2dpbiIKICAgICAgfSk7CiAgICB9LCAxMDAwKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgc3RhdHVzID0gZXJyb3IucmVzcG9uc2U7CgogIGlmIChzdGF0dXMpIHsKICAgIHN3aXRjaCAoc3RhdHVzLnN0YXR1cykgewogICAgICBjYXNlIDQwMDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gIumUmeivr+ivt+axgiI7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwMToKICAgICAgICBlcnJvci5tZXNzYWdlID0gIuacquaOiOadg++8jOivt+mHjeaWsOeZu+W9lSI7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwMzoKICAgICAgICBlcnJvci5tZXNzYWdlID0gIuaLkue7neiuv+mXriI7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwNDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gIuivt+axgumUmeivryzmnKrmib7liLDor6XotYTmupAiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0MDU6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLor7fmsYLmlrnms5XmnKrlhYHorrgiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0MDg6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLor7fmsYLotoXml7YiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDA6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLmnI3liqHlmajnq6/lh7rplJnvvIzor7fmo4Dmn6XnvZHnu5wiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDE6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLnvZHnu5zmnKrlrp7njrAiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDI6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLpk77mjqXmnI3liqHlmajlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5wiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDM6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLmnI3liqHkuI3lj6/nlKgiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDQ6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICLnvZHnu5zotoXml7YiOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDU6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICJodHRw54mI5pys5LiN5pSv5oyB6K+l6K+35rGCIjsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICJcdThGREVcdTYzQTVcdTk1MTlcdThCRUYiLmNvbmNhdChlcnJvci5yZXNwb25zZS5zdGF0dXMpOwogICAgfQogIH0gZWxzZSB7CiAgICBlcnJvci5tZXNzYWdlID0gIuivt+axguWksei0peacjeWKoeWZqOacquWTjeW6lO+8jOivt+ajgOafpee9kee7nCI7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKLyoqDQogKiDkuozmrKHlsIHoo4VheGlvcw0KICogQHBhcmFtIHtTdHJpbmd9IHVybCAvLyDlkI7nq69hcGnlnLDlnYDvvIjlv4XloavvvIkNCiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC8vIOS8oOWPgu+8iOW/heWhq++8iQ0KICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLy8g6K+35rGC57G75Z6L77yI5b+F5aGr77yJDQogKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2VUeXBlIC8vIOivt+axguexu+Weiw0KICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQgLy8g6K+35rGC562J5b6F5pe26Ze0ICjpnZ7lv4XloaspDQogKiBAcmV0dXJucyB7UHJvbWlzZTx1bmtub3duPn0g6L+U5Zue5byC5q2l6K+35rGC54q25oCBDQogKi8KCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFqYXgodXJsKSB7CiAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciB0eXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAiR0VUIjsKICB2YXIgcmVzcG9uc2VUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIHRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IDIwMDAwMDsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHByb21pc2U7CiAgICBheGlvcy5kZWZhdWx0cy50aW1lb3V0ID0gdGltZW91dDsgLy8g6K+35rGC6LaF5pe25pe26Ze0CgogICAgaWYgKHR5cGUgPT09ICJHRVQiKSB7CiAgICAgIHByb21pc2UgPSBheGlvcy5nZXQodXJsLCB7CiAgICAgICAgcGFyYW1zOiBkYXRhCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcHJvbWlzZSA9IGF4aW9zLnBvc3QodXJsLCBkYXRhLCByZXNwb25zZVR5cGUpOwogICAgfQoKICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXNvbHZlKHsKICAgICAgICBjb2RlOiAiZXJyb3IiLAogICAgICAgIG1zZzogIiIuY29uY2F0KHVybCwgIlx1RkYxQSIpLmNvbmNhdChlcnJvci5tZXNzYWdlKQogICAgICB9KTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgTWVzc2FnZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgIHJlamVjdChlcnIpOwogICAgfSk7CiAgfSk7Cn0="},{"version":3,"sources":["/Users/caijianli/Desktop/malladmin/src/api/ajax.js"],"names":["axios","storageUtils","DonMessage","router","Message","interceptors","request","use","config","storage_user","getUser","data","token","JSON","stringify","err","Promise","reject","response","code","parseInt","process","env","VUE_APP_BASE_ERR_TOKEN_CODE","warning","setTimeout","replace","path","resolve","error","status","message","ajax","url","type","responseType","undefined","timeout","promise","defaults","get","params","post","then","msg","catch"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport storageUtils from \"@/commonutils/storageUtils\";\r\nimport DonMessage from \"@/commonutils/message\";\r\nimport router from \"@/router\";\r\nconst Message = new DonMessage();\r\n/**\r\n * 在接口前统一添加token\r\n */\r\naxios.interceptors.request.use(\r\n  function(config) {\r\n    const storage_user = storageUtils.getUser();\r\n    if (storage_user && config.data) {\r\n      if (!config.data.token || JSON.stringify(config.data.token) === \"{}\") {\r\n        config.data.token = storage_user.token;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  err => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n/**\r\n * http请求状态码拦截\r\n */\r\naxios.interceptors.response.use(\r\n  response => {\r\n    if (\r\n      response.data &&\r\n      response.data.code === parseInt(process.env.VUE_APP_BASE_ERR_TOKEN_CODE)\r\n    ) {\r\n      Message.warning(\"登录信息已过期，请重新登录\");\r\n      setTimeout(() => {\r\n        router.replace({\r\n          path: \"/login\"\r\n        });\r\n      }, 1000);\r\n    }\r\n    return Promise.resolve(response);\r\n  },\r\n  error => {\r\n    const status = error.response;\r\n    if (status) {\r\n      switch (status.status) {\r\n        case 400:\r\n          error.message = \"错误请求\";\r\n          break;\r\n        case 401:\r\n          error.message = \"未授权，请重新登录\";\r\n          break;\r\n        case 403:\r\n          error.message = \"拒绝访问\";\r\n          break;\r\n        case 404:\r\n          error.message = \"请求错误,未找到该资源\";\r\n          break;\r\n        case 405:\r\n          error.message = \"请求方法未允许\";\r\n          break;\r\n        case 408:\r\n          error.message = \"请求超时\";\r\n          break;\r\n        case 500:\r\n          error.message = \"服务器端出错，请检查网络\";\r\n          break;\r\n        case 501:\r\n          error.message = \"网络未实现\";\r\n          break;\r\n        case 502:\r\n          error.message = \"链接服务器失败，请检查网络\";\r\n          break;\r\n        case 503:\r\n          error.message = \"服务不可用\";\r\n          break;\r\n        case 504:\r\n          error.message = \"网络超时\";\r\n          break;\r\n        case 505:\r\n          error.message = \"http版本不支持该请求\";\r\n          break;\r\n        default:\r\n          error.message = `连接错误${error.response.status}`;\r\n      }\r\n    } else {\r\n      error.message = \"请求失败服务器未响应，请检查网络\";\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n/**\r\n * 二次封装axios\r\n * @param {String} url // 后端api地址（必填）\r\n * @param {Object} data // 传参（必填）\r\n * @param {String} type // 请求类型（必填）\r\n * @param {Object} responseType // 请求类型\r\n * @param {Number} timeout // 请求等待时间 (非必填)\r\n * @returns {Promise<unknown>} 返回异步请求状态\r\n */\r\nexport default function ajax(\r\n  url,\r\n  data = {},\r\n  type = \"GET\",\r\n  responseType = undefined,\r\n  timeout = 200000\r\n) {\r\n  return new Promise((resolve, reject) => {\r\n    let promise;\r\n    axios.defaults.timeout = timeout; // 请求超时时间\r\n    if (type === \"GET\") {\r\n      promise = axios.get(url, {\r\n        params: data\r\n      });\r\n    } else {\r\n      promise = axios.post(url, data, responseType);\r\n    }\r\n    promise\r\n      .then(\r\n        response => {\r\n          resolve(response.data);\r\n        },\r\n        error => {\r\n          resolve({\r\n            code: \"error\",\r\n            msg: `${url}：${error.message}`\r\n          });\r\n        }\r\n      )\r\n      .catch(err => {\r\n        Message.error(err.message);\r\n        reject(err);\r\n      });\r\n  });\r\n}\r\n"]}]}