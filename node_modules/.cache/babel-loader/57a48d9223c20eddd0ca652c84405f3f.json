{"remainingRequest":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js!/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/caijianli/Desktop/malladmin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/caijianli/Desktop/malladmin/src/components/imageUpload/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/caijianli/Desktop/malladmin/src/components/imageUpload/index.vue","mtime":1582099472000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2NhaWppYW5saS9EZXNrdG9wL21hbGxhZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvY2FpamlhbmxpL0Rlc2t0b3AvbWFsbGFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgQ29tcHJlc3NvckltZyB9IGZyb20gIkAvY29tbW9udXRpbHMvY29tcHJlc3NvciI7CmltcG9ydCB7IE9zc1JlcXVzZXQgfSBmcm9tICJAL2NvbW1vbnV0aWxzL2FsaU9TUyI7CmltcG9ydCB7IGVycm9yTXNnLCB1dWlkLCB3YXJuaW5nTXNnIH0gZnJvbSAiQC9jb21tb251dGlscy9jb21tb24iOwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gInZ1ZWRyYWdnYWJsZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW1hZ2VVcGxvYWQiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub0ltZzogcmVxdWlyZSgiQC9hc3NldHMvaW1hZ2VzL25vSW1nLmpwZyIpLAogICAgICBpbWFnZVVybDogIiIsCiAgICAgIGltYWdlTGlzdDogW10sCiAgICAgIGRyYWc6IGZhbHNlLAogICAgICBjbGllbnQ6IG51bGwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBkcmFnZ2FibGU6IGRyYWdnYWJsZQogIH0sCiAgcHJvcHM6IHsKICAgIGlzU2hvd1RpcDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgd2lkdGg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiMTQ4cHgiCiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIjE0OHB4IgogICAgfSwKICAgIHNpemU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6IDc1MCwKICAgICAgICAgIGhlaWdodDogNzUwCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGlzTXVsdGk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpbWFnZTogW1N0cmluZywgQXJyYXldCiAgfSwKICB3YXRjaDogewogICAgaW1hZ2U6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICBpZiAodGhpcy5pc011bHRpKSB7CiAgICAgICAgICB0aGlzLmltYWdlTGlzdCA9IHZhbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbWFnZVVybCA9IHZhbDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsidXNlciIsICJhbGl5dW5Pc3MiXSksIHsKICAgIC8qKg0KICAgICAqIOaLluaLvQ0KICAgICAqIEByZXR1cm5zIHt7Z2hvc3RDbGFzczogc3RyaW5nLCBkaXNhYmxlZDogYm9vbGVhbiwgYW5pbWF0aW9uOiBudW1iZXIsIGdyb3VwOiBzdHJpbmd9fSDmi5bmi73kv6Hmga8NCiAgICAgKi8KICAgIGRyYWdPcHRpb25zOiBmdW5jdGlvbiBkcmFnT3B0aW9ucygpIHsKICAgICAgdGhpcy51cGRhdGVJbWFnZSgpOwogICAgICByZXR1cm4gewogICAgICAgIGFuaW1hdGlvbjogNTAwLAogICAgICAgIGdyb3VwOiAiZGVzY3JpcHRpb24iLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBnaG9zdENsYXNzOiAiZ2hvc3QiCiAgICAgIH07CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgLyoqDQogICAgICog5pu05paw54i257uE5Lu25Zu+54mHDQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICovCiAgICB1cGRhdGVJbWFnZTogZnVuY3Rpb24gdXBkYXRlSW1hZ2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTppbWFnZSIsIHRoaXMuaXNNdWx0aSA/IHRoaXMuaW1hZ2VMaXN0IDogdGhpcy5pbWFnZVVybCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWIoOmZpOWVhuWTgeS4u+Wbvg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwNCiAgICAgKiBAcmV0dXJucyB7dm9pZH0NCiAgICAgKi8KICAgIGRlbEltZzogZnVuY3Rpb24gZGVsSW1nKHZhbCkgewogICAgICB0aGlzLmltYWdlTGlzdCA9IHRoaXMuaW1hZ2VMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtICE9PSB2YWw7CiAgICAgIH0pOwogICAgICB0aGlzLnVwZGF0ZUltYWdlKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWbvueJh+S4iuS8oOS5i+WJjQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlDQogICAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0g6L+U5Zue5piv5ZCm5LiK5Lyg54q25oCBDQogICAgICovCiAgICBiZWZvcmVBdmF0YXJVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpc0pQRyA9IGZpbGUudHlwZSA9PT0gImltYWdlL2pwZWciIHx8IGZpbGUudHlwZSA9PT0gImltYWdlL3BuZyI7IC8vIOWbvueJh+exu+WeiwoKICAgICAgdmFyIGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNTsgLy8g5Zu+54mH5aSn5bCPCiAgICAgIC8vIGNvbnN0IGZpbGVMZW4gPSB0aGlzLmZvcm0uaW1nTGlzdC5sZW5ndGggPCA1OyAvLyDmnIDlpJrkuIrkvKDmlbDph48KCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuc2l6ZS53aWR0aDsgLy8g5Zu+54mH5a69CgogICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5zaXplLmhlaWdodDsgLy8g5Zu+54mH6auYCgogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5YaF5a655Li75Zu+5Y+q6IO95pivIEpQR+aIluiAhVBORyDmoLzlvI8hIik7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5YaF5a655Li75Zu+5aSn5bCP5LiN6IO96LaF6L+HIDVNQiEiKTsKICAgICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKCgogICAgICB2YXIgaXNTaXplID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBfVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMOwoKICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CgogICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdmFsaWQgPSBpbWcud2lkdGggPT09IHdpZHRoICYmIGltZy5oZWlnaHQgPT09IGhlaWdodDsKICAgICAgICAgIHZhbGlkID8gcmVzb2x2ZSgpIDogcmVqZWN0KCk7CiAgICAgICAgfTsKCiAgICAgICAgaW1nLnNyYyA9IF9VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZmlsZTsKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICJcdTU2RkVcdTcyNDdcdTVDM0FcdTVCRjhcdTk2NTBcdTUyMzZcdTRFM0EiLmNvbmNhdChfdGhpczIuc2l6ZS53aWR0aCwgIiB4ICIpLmNvbmNhdChfdGhpczIuc2l6ZS5oZWlnaHQsICJcdUZGMENcdThCRjdcdTkxQ0RcdTY1QjBcdTRFMEFcdTRGMjAiKSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCJcdTU2RkVcdTcyNDdcdTVDM0FcdTVCRjhcdTk2NTBcdTUyMzZcdTRFM0EiLmNvbmNhdChfdGhpczIuc2l6ZS53aWR0aCwgIiB4ICIpLmNvbmNhdChfdGhpczIuc2l6ZS5oZWlnaHQsICJcdUZGMENcdThCRjdcdTkxQ0RcdTY1QjBcdTRFMEFcdTRGMjAiKSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNICYmIGlzU2l6ZTsKICAgIH0sCgogICAgLyoqDQogICAgICog5re75Yqg5YaF5a655Li75Zu+5oiQ5Yqf5pe26L+U5ZueDQogICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGUNCiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWxlTGlzdA0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqLwogICAgcGljdHVyZVNlbGVjdDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3BpY3R1cmVTZWxlY3QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGZpbGUpIHsKICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgICAgdmFyIGltYWdlLCBjbGllbnQsIF9vYmo7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUucmF3KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0LnNlbnQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBDb21wcmVzc29ySW1nKGZpbGUucmF3KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaW1hZ2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gT3NzUmVxdXNldCgpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjbGllbnQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX29iaiA9IHRoaXMuYWxpeXVuT3NzLmltZ1BhdGggKyAiLyIgKyB1dWlkKCk7CiAgICAgICAgICAgICAgICBjbGllbnQucHV0KF9vYmosIGltYWdlKS50aGVuKGZ1bmN0aW9uIChyMSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLmlzTXVsdGkpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczMuaW1hZ2VMaXN0LnB1c2goX3RoaXMzLmFsaXl1bk9zcy5pbWdIb3N0ICsgcjEubmFtZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmltYWdlVXJsID0gX3RoaXMzLmFsaXl1bk9zcy5pbWdIb3N0ICsgcjEubmFtZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMzLnVwZGF0ZUltYWdlKCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGVycm9yTXNnKF90aGlzMywgZXJyKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHBpY3R1cmVTZWxlY3QoX3gpIHsKICAgICAgICByZXR1cm4gX3BpY3R1cmVTZWxlY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBpY3R1cmVTZWxlY3Q7CiAgICB9KCkKICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"imageUpload\">\r\n    <div class=\"uploader-layout\">\r\n      <template v-if=\"isMulti\">\r\n        <draggable\r\n          class=\"el-upload-list el-upload-list--picture-card\"\r\n          tag=\"ul\"\r\n          v-if=\"imageList.length\"\r\n          v-model=\"imageList\"\r\n          v-bind=\"dragOptions\"\r\n          @start=\"drag = true\"\r\n          @end=\"drag = false\"\r\n        >\r\n          <li\r\n            class=\"el-upload-list__item\"\r\n            :class=\"{ isDrap: drag }\"\r\n            v-for=\"(item, index) in imageList\"\r\n            :key=\"index\"\r\n          >\r\n            <el-image\r\n              style=\"width: 148px; height: 148px; cursor: move\"\r\n              :src=\"item\"\r\n              fit=\"contain\"\r\n            >\r\n              <div slot=\"placeholder\" class=\"image-slot\">\r\n                图片加载中<span class=\"el-icon-loading\"></span>\r\n              </div>\r\n            </el-image>\r\n            <i\r\n              class=\"el-icon-error btn\"\r\n              @click=\"delImg(item)\"\r\n              title=\"删除图片\"\r\n            />\r\n          </li>\r\n        </draggable>\r\n        <el-upload\r\n          v-if=\"imageList.length < 5\"\r\n          class=\"avatar-uploader\"\r\n          action=\"\"\r\n          :auto-upload=\"false\"\r\n          accept=\".jpg,.png\"\r\n          :on-change=\"pictureSelect\"\r\n          :show-file-list=\"false\"\r\n        >\r\n          <div class=\"el-upload--picture-card\">\r\n            <i class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </div>\r\n        </el-upload>\r\n      </template>\r\n      <template v-else>\r\n        <el-upload\r\n          :style=\"{width: width, height: height}\"\r\n          class=\"avatar-uploader\"\r\n          action=\"\"\r\n          :auto-upload=\"false\"\r\n          accept=\".jpg,.png\"\r\n          :on-change=\"pictureSelect\"\r\n          :show-file-list=\"false\"\r\n        >\r\n          <div\r\n            class=\"el-upload--picture-card\"\r\n            :style=\"{ width: width, height: height }\"\r\n            title=\"点击上传图片\"\r\n          >\r\n            <el-image\r\n              class=\"article-img\"\r\n              v-if=\"imageUrl\"\r\n              style=\"width: 100%; height: 100%;\"\r\n              :src=\"imageUrl\"\r\n              fit=\"scale-down\"\r\n            >\r\n              <div slot=\"error\" class=\"image-slot\" title=\"图片加载失败\">\r\n                <img :src=\"noImg\" width=\"100%\" />\r\n                <!-- <span>图片加载失败</span> -->\r\n              </div>\r\n              <div slot=\"placeholder\" class=\"image-slot\">\r\n                图片加载中<span class=\"el-icon-loading\"></span>\r\n              </div>\r\n            </el-image>\r\n            <div v-else class=\"upload-tip\">\r\n              <i class=\"el-icon-plus avatar-uploader-icon\" />\r\n<!--              <font size=\"1\"-->\r\n<!--                >(仅限上传尺寸:1920x1080，大小不超过1M的图片文件)</font-->\r\n<!--              >-->\r\n            </div>\r\n          </div>\r\n        </el-upload>\r\n      </template>\r\n    </div>\r\n    <div class=\"tip-text\" v-if=\"isShowTip\">\r\n      最多上传{{ isMulti ? 5 : 1 }}张图片，建议尺寸{{ size.width }} x\r\n      {{ size.height }} 像素，图片大小不能超过5MB；\r\n      <span v-if=\"isMulti\">你可以左右拖拽图片调整图片顺序</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport { CompressorImg } from \"@/commonutils/compressor\";\r\nimport { OssRequset } from \"@/commonutils/aliOSS\";\r\nimport { errorMsg, uuid, warningMsg } from \"@/commonutils/common\";\r\nimport draggable from \"vuedraggable\";\r\n\r\nexport default {\r\n  name: \"imageUpload\",\r\n  data() {\r\n    return {\r\n      noImg: require(\"@/assets/images/noImg.jpg\"),\r\n      imageUrl: \"\",\r\n      imageList: [],\r\n      drag: false,\r\n      client: null\r\n    };\r\n  },\r\n  components: {\r\n    draggable\r\n  },\r\n  props: {\r\n    isShowTip: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    width: {\r\n      type: String,\r\n      default: \"148px\"\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: \"148px\"\r\n    },\r\n    size: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: 750,\r\n          height: 750\r\n        };\r\n      }\r\n    },\r\n    isMulti: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    image: [String, Array]\r\n  },\r\n  watch: {\r\n    image: {\r\n      handler(val) {\r\n        if (this.isMulti) {\r\n          this.imageList = val;\r\n        } else {\r\n          this.imageUrl = val;\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\"user\", \"aliyunOss\"]),\r\n    /**\r\n     * 拖拽\r\n     * @returns {{ghostClass: string, disabled: boolean, animation: number, group: string}} 拖拽信息\r\n     */\r\n    dragOptions() {\r\n      this.updateImage();\r\n      return {\r\n        animation: 500,\r\n        group: \"description\",\r\n        disabled: false,\r\n        ghostClass: \"ghost\"\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 更新父组件图片\r\n     * @returns {void}\r\n     */\r\n    updateImage() {\r\n      this.$emit(\"update:image\", this.isMulti ? this.imageList : this.imageUrl);\r\n    },\r\n    /**\r\n     * 删除商品主图\r\n     * @param {Object} val\r\n     * @returns {void}\r\n     */\r\n    delImg(val) {\r\n      this.imageList = this.imageList.filter(item => item !== val);\r\n      this.updateImage();\r\n    },\r\n    /**\r\n     * 图片上传之前\r\n     * @param {Object} file\r\n     * @returns {Promise<Object>} 返回是否上传状态\r\n     */\r\n    beforeAvatarUpload(file) {\r\n      const _this = this;\r\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\"; // 图片类型\r\n      const isLt2M = file.size / 1024 / 1024 < 5; // 图片大小\r\n      // const fileLen = this.form.imgList.length < 5; // 最多上传数量\r\n      const width = this.size.width; // 图片宽\r\n      const height = this.size.height; // 图片高\r\n      if (!isJPG) {\r\n        this.$message.error(\"内容主图只能是 JPG或者PNG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"内容主图大小不能超过 5MB!\");\r\n      }\r\n      // eslint-disable-next-line no-unused-vars\r\n      const isSize = new Promise(function(resolve, reject) {\r\n        let _URL = window.URL || window.webkitURL;\r\n        let img = new Image();\r\n        img.onload = () => {\r\n          let valid = img.width === width && img.height === height;\r\n          valid ? resolve() : reject();\r\n        };\r\n        img.src = _URL.createObjectURL(file);\r\n      }).then(\r\n        () => {\r\n          return file;\r\n        },\r\n        () => {\r\n          warningMsg(\r\n            _this,\r\n            `图片尺寸限制为${this.size.width} x ${this.size.height}，请重新上传`\r\n          );\r\n          return Promise.reject(\r\n            `图片尺寸限制为${this.size.width} x ${this.size.height}，请重新上传`\r\n          );\r\n        }\r\n      );\r\n      return isJPG && isLt2M && isSize;\r\n    },\r\n    /**\r\n     * 添加内容主图成功时返回\r\n     * @param {Object} file\r\n     * @param {Array} fileList\r\n     * @returns {void}\r\n     */\r\n    async pictureSelect(file) {\r\n      if (!(await this.beforeAvatarUpload(file.raw))) {\r\n        return;\r\n      }\r\n      const image = await CompressorImg(file.raw);\r\n      const client = await OssRequset();\r\n      const _obj = this.aliyunOss.imgPath + \"/\" + uuid();\r\n      client\r\n        .put(_obj, image)\r\n        .then(r1 => {\r\n          if (this.isMulti) {\r\n            this.imageList.push(this.aliyunOss.imgHost + r1.name);\r\n          } else {\r\n            this.imageUrl = this.aliyunOss.imgHost + r1.name;\r\n          }\r\n          this.updateImage();\r\n        })\r\n        .catch(err => {\r\n          errorMsg(this, err);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped src=\"./_imageUpload.scss\" />\r\n"],"sourceRoot":"src/components/imageUpload"}]}