{"remainingRequest":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js!/Users/caijianli/Desktop/malladmin/node_modules/eslint-loader/index.js??ref--13-0!/Users/caijianli/Desktop/malladmin/src/views/container/goodsManage/createGoods/controller/index.js","dependencies":[{"path":"/Users/caijianli/Desktop/malladmin/src/views/container/goodsManage/createGoods/controller/index.js","mtime":1582099472000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/caijianli/Desktop/malladmin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWludCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2NhaWppYW5saS9EZXNrdG9wL21hbGxhZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvY2FpamlhbmxpL0Rlc2t0b3AvbWFsbGFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLyoqDQogKiAgQ3JlYXRlZCBieSB3YW5nQWxlbiBvbiAyMDE5LTExLTEyIDExOjQ5DQogKi8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGRyYWdnYWJsZSBmcm9tICJ2dWVkcmFnZ2FibGUiOwppbXBvcnQgeyB3YXJuaW5nTXNnLCBzdWNjZXNzTXNnLCB1dWlkLCBqc29uRGVlcENsb25lLCBTVEFUVVNfQ09ERSwgcmVnWXVhblRvRmVuLCBlcnJvck1zZywgcmVnRmVuVG9ZdWFuLCB0b0RlY2ltYWwyIH0gZnJvbSAiQC9jb21tb251dGlscy9jb21tb24iOwppbXBvcnQgeyBjcmVhdGVHb29kcywgZ2V0R29vZHNJbmZvIH0gZnJvbSAiLi9yZXF1ZXN0IjsKaW1wb3J0IENvbGxhcHNlVHJhbnNpdGlvbiBmcm9tICJlbGVtZW50LXVpL2xpYi90cmFuc2l0aW9ucy9jb2xsYXBzZS10cmFuc2l0aW9uIjsKaW1wb3J0IEdvb2RzU3BlY2lmaWNhdGlvbnMgZnJvbSAiLi4vLi4vZ29vZHNTcGVjaWZpY2F0aW9ucy9nb29kc1NwZWNpZmljYXRpb25zIjsKaW1wb3J0IGVkaXRvciBmcm9tICJAL2NvbXBvbmVudHMvZWRpdG9yIjsKaW1wb3J0IHsgZ2V0R29vZHNDYXRlZ29yeSB9IGZyb20gIi4uLy4uLy4uL2dvb2RzQ2F0ZWdvcnkvcmVxdWVzdCI7CmltcG9ydCB7IHJlcUdldEdvb2RzR3JvdXAgfSBmcm9tICIuLi8uLi8uLi9nb29kc0dyb3VwL3JlcXVlc3QiOwppbXBvcnQgaW1hZ2VVcGxvYWQgZnJvbSAiQC9jb21wb25lbnRzL2ltYWdlVXBsb2FkIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVHb29kcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIC8qKg0KICAgICAqIOWVhuWTgeS7t+agvOato+WImei/h+a7pA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBydWxlDQogICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNhbGxiYWNrDQogICAgICogQHJldHVybnMge09iamVjdH0gY2FsbGJhY2sNCiAgICAgKi8KICAgIHZhciB2YWxpZGF0ZVByaWNlID0gZnVuY3Rpb24gdmFsaWRhdGVQcmljZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5Lu35qC8IikpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlIDw9IDAgfHwgIS9eWzAtOV0rKC5bMC05XXsxLDV9KT8kLy50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lu35qC85LiN5ZCI5rOV77yM6K+36YeN5paw6L6T5YWlIikpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID4gOTk5OTkpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS7t+agvOS4jeWQiOazle+8jOivt+mHjeaWsOi+k+WFpSIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBjaGVja1dlaWdodCA9IGZ1bmN0aW9uIGNoZWNrV2VpZ2h0KHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6YeN6YeP5LiN6IO95Li656m6IikpOwogICAgICB9CgogICAgICBpZiAodmFsdWUgPD0gMCB8fCAhL15bMC05XSsoLlswLTldezEsNX0pPyQvLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLph43ph4/kuI3lkIjms5XvvIzor7fph43mlrDovpPlhaUiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHZhbHVlID4gOTk5OSkgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLph43ph4/kuI3lkIjms5XvvIzor7fph43mlrDovpPlhaUiKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHZhciB2YWxpZGF0ZVRhZ3MgPSBmdW5jdGlvbiB2YWxpZGF0ZVRhZ3MocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICghdmFsdWUubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36YCJ5oup5ZWG5ZOB5qCH562+IikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgRHJhZnQ6IFNUQVRVU19DT0RFLmdvb2RzRHJhZnQsCiAgICAgIFJlbGVhc2U6IFNUQVRVU19DT0RFLmdvb2RzUmVsZWFzZSwKICAgICAgZ29vZHNHcm91cDogW10sCiAgICAgIGdvb2RzQ2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgc2hvdzE6IHRydWUsCiAgICAgIHNob3cyOiB0cnVlLAogICAgICBzaG93MzogdHJ1ZSwKICAgICAgZHJhZzogZmFsc2UsCiAgICAgIHRyYW5zZjogW3sKICAgICAgICBuYW1lOiAi5YyF6YKuIiwKICAgICAgICBpZDogMQogICAgICB9XSwKICAgICAgZm9ybTogewogICAgICAgIGNhdGVnb3J5OiAiIiwKICAgICAgICAvLyDllYblk4HliIbnsbsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICAvLyDllYblk4HlkI3np7AKICAgICAgICBjb3N0UHJpY2U6ICIiLAogICAgICAgIC8vIOWVhuWTgeWUruWNluS7t+agvAogICAgICAgIHNob3dQcmljZTogIiIsCiAgICAgICAgLy8g5ZWG5ZOB5bGV56S65Lu35qC8CiAgICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICAgIC8vIOWVhuWTgeaPj+i/sAogICAgICAgIHNlcnZpY2VDb250ZW50OiAiIiwKICAgICAgICAvLyDmnI3liqHor7TmmI4KICAgICAgICBmcmVpZ2h0SWQ6ICIiLAogICAgICAgIC8vIOi/kOi0ueaooeadvwogICAgICAgIHdlaWdodDogIiIsCiAgICAgICAgLy8g54mp5rWB6YeN6YePCiAgICAgICAgdGVtcG9yYXJ5SW1nTGlzdDogW10sCiAgICAgICAgaW1nTGlzdDogW10sCiAgICAgICAgLy8g5ZWG5ZOB5Li75Zu+5YiX6KGoCiAgICAgICAgdGFnczogW10sCiAgICAgICAgLy8g5ZWG5ZOB5qCH562+CiAgICAgICAgdmlkZW86ICIiLAogICAgICAgIC8vIOWVhuWTgeinhumikQogICAgICAgIHNwZWNpZmljYXRpb25zRGF0YTogW10sCiAgICAgICAgLy8g5ZWG5ZOB6KeE5qC85YiX6KGoCiAgICAgICAgZ29vZHNJbmZvOiAiIiwKICAgICAgICAvLyDllYblk4Hlr4zmlofmnKwKICAgICAgICBnb29kc1BhcmFtczogW3sKICAgICAgICAgIGtleTogIuWTgeeJjCIsCiAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICLlnovlj7ciLAogICAgICAgICAgdmFsdWU6ICIiCiAgICAgICAgfV0sCiAgICAgICAgc2t1OiBbXQogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmFjZUxpc3Q6IFtdLAogICAgICBlZGl0b3JDb250ZW50OiAiIiwKICAgICAgRklMRV9UWVBFX0FWQVRBUjogcHJvY2Vzcy5lbnYuVlVFX0FQUF9GSUxFX1RZUEVfQVZBVEFSLAogICAgICBTVUNDX0NPREU6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9TVUNDX0NPREUsCiAgICAgIEVSUl9UT0tFTl9DT0RFOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfRVJSX1RPS0VOX0NPREUsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWVhuWTgeWQjeensCIsCiAgICAgICAgICB0cmlnZ2VyOiBbImNoYW5nZSJdCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAyLAogICAgICAgICAgbWF4OiA1MCwKICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggMiDliLAgNTAg5Liq5a2X56ymIiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgY2F0ZWdvcnk6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nllYblk4HliIbnsbsiLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XSwKICAgICAgICBmcmVpZ2h0SWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nov5DotLnmqKHmnb8iLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XSwKICAgICAgICBjb3N0UHJpY2U6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUHJpY2UsCiAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICAgIH1dLAogICAgICAgIHNob3dQcmljZTogW3sKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQcmljZSwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgdGFnczogW3sKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVUYWdzLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XSwKICAgICAgICB3ZWlnaHQ6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrV2VpZ2h0LAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XQogICAgICB9LAogICAgICBpc0RyYWZ0OiBmYWxzZSwKICAgICAgaXNSZWxlYXNlOiBmYWxzZSwKICAgICAgZ29vZHNJbmZvT3JpZ2luOiB7fSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGVkaXRMYXlvdXQ6IHsKICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgIGhlaWdodDogIjQwMHB4IgogICAgICB9CiAgICB9OwogIH0sCiAgLy8gYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgewogIC8vICAgdGhpcy4kY29uZmlybSgi6KGo5Y2V5pWw5o2u5pyq5L+d5a2Y77yM5L2g56Gu5a6a6KaB56a75byA5ZCXPyIsICLmj5DnpLoiLCB7CiAgLy8gICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAvLyAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIKICAvLyAgIH0pCiAgLy8gICAgIC50aGVuKCgpID0+IHsKICAvLyAgICAgICBuZXh0KCk7CiAgLy8gICAgIH0pCiAgLy8gICAgIC5jYXRjaCgoKSA9PiB7CiAgLy8gICAgICAgbmV4dChmYWxzZSk7CiAgLy8gICAgIH0pOwogIC8vIH0sCiAgY29tcG9uZW50czogewogICAgZHJhZ2dhYmxlOiBkcmFnZ2FibGUsCiAgICBDb2xsYXBzZVRyYW5zaXRpb246IENvbGxhcHNlVHJhbnNpdGlvbiwKICAgIEdvb2RzU3BlY2lmaWNhdGlvbnM6IEdvb2RzU3BlY2lmaWNhdGlvbnMsCiAgICBlZGl0b3I6IGVkaXRvciwKICAgIGltYWdlVXBsb2FkOiBpbWFnZVVwbG9hZAogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0R29vZHNJbmZvRGF0YSgpOwogICAgdGhpcy5nZXRHb29kc0NhdGVnb3J5TGlzdCgpOwogICAgdGhpcy5nZXRHb29kc0dyb3VwKCk7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWyJ1c2VyIiwgImFsaXl1bk9zcyJdKSwgewogICAgLyoqDQogICAgICog5piv5ZCm5Y+v57yW6L6RDQogICAgICogQHJldHVybnMge2Jvb2xlYW59IOe8lui+keeKtuaAgQ0KICAgICAqLwogICAgaXNFZGl0OiBmdW5jdGlvbiBpc0VkaXQoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMucm91dGVEYXRhLnF1ZXJ5Lmdvb2RzSWQpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDot6/nlLHkv6Hmga8NCiAgICAgKiBAcmV0dXJucyB7Um91dGV9IOi3r+eUseS/oeaBrw0KICAgICAqLwogICAgcm91dGVEYXRhOiBmdW5jdGlvbiByb3V0ZURhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZTsKICAgIH0sCgogICAgLyoqDQogICAgICog5ouW5ou9DQogICAgICogQHJldHVybnMge3tnaG9zdENsYXNzOiBzdHJpbmcsIGRpc2FibGVkOiBib29sZWFuLCBhbmltYXRpb246IG51bWJlciwgZ3JvdXA6IHN0cmluZ319IOaLluaLveS/oeaBrw0KICAgICAqLwogICAgZHJhZ09wdGlvbnM6IGZ1bmN0aW9uIGRyYWdPcHRpb25zKCkgewogICAgICByZXR1cm4gewogICAgICAgIGFuaW1hdGlvbjogNTAwLAogICAgICAgIGdyb3VwOiAiZGVzY3JpcHRpb24iLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBnaG9zdENsYXNzOiAiZ2hvc3QiCiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOaWsOWinuWVhuWTgeWPguaVsA0KICAgICAqIEByZXR1cm5zIHtBcnJheX0g5paw5aKe5ZWG5ZOB5Y+C5pWwDQogICAgICovCiAgICBnb29kc1BhcmFtc05ldzogZnVuY3Rpb24gZ29vZHNQYXJhbXNOZXcoKSB7CiAgICAgIGlmICh0aGlzLmZvcm0uZ29vZHNQYXJhbXMubGVuZ3RoID49IDMpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JtLmdvb2RzUGFyYW1zLnNsaWNlKDIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0pLAogIG1ldGhvZHM6IHsKICAgIC8qKg0KICAgICAqIOagueaNrui3r+eUsWlk5p+l6K+i5ZWG5ZOB6K+m5oOFDQogICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IGdvb2RzSW5mbw0KICAgICAqLwogICAgZ2V0R29vZHNJbmZvRGF0YTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEdvb2RzSW5mb0RhdGEgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBwYXJhbXMsIGRhdGEsIGdvb2RzSW5mbywgc2t1LCBzcGVjaWZpY2F0aW9uc0RhdGEsIHRhZ3M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcGFyYW1zID0gdGhpcy5yb3V0ZURhdGEucXVlcnk7IC8vIOWIpOaWreaYr+WQpuS4uue8lui+keeKtuaAgQoKICAgICAgICAgICAgICAgIGlmIChwYXJhbXMuZ29vZHNJZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsgLy8gdGhpcy4kcm91dGUubWV0YS50aXRsZSA9ICLnvJbovpHllYblk4EiOwogICAgICAgICAgICAgICAgLy8g6K+35rGC5ZWG5ZOB6K+m5oOF5pWw5o2uCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0R29vZHNJbmZvKHsKICAgICAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5nb29kc0lkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5jb2RlICE9PSBTVEFUVVNfQ09ERS5zdWNjZXNzKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVycm9yTXNnKHRoaXMsIGRhdGEubXNnKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgdGhpcy5nb29kc0luZm9PcmlnaW4gPSBqc29uRGVlcENsb25lKGRhdGEucmVzdWx0Lmdvb2RzKTsgLy8g5aSH5Lu95Y6f5aeL5pWw5o2uCgogICAgICAgICAgICAgICAgZ29vZHNJbmZvID0gZGF0YS5yZXN1bHQuZ29vZHM7CiAgICAgICAgICAgICAgICBza3UgPSBbXTsKICAgICAgICAgICAgICAgIHNwZWNpZmljYXRpb25zRGF0YSA9IFtdOyAvLyDmjInnhafnvJbovpHmoLzlvI/mnaXmoLzlvI/ljJbop4TmoLzliJfooagKCiAgICAgICAgICAgICAgICBnb29kc0luZm8ub3B0aW9ucy5saXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgICAgICAgICBpdGVtLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbSwKICAgICAgICAgICAgICAgICAgICAgIGlkOiB1dWlkKCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHNwZWNpZmljYXRpb25zRGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBzcGVjaWZpY2F0aW9uczogaXRlbS5rZXksCiAgICAgICAgICAgICAgICAgICAgaWQ6IHV1aWQoKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiBhcnIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsgLy8g5qC85byP5YyW6L+U5ZueU2t15pWw5o2uCgogICAgICAgICAgICAgICAgZ29vZHNJbmZvLnNrdXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSAiIjsKICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlTGlzdF8gPSBbXTsgLy8g5b6q546vc2t1IHZhbHVlIGxpc3Tlubbmj5LlhaV1aWTvvIx2YWx1ZUxpc3RfCgogICAgICAgICAgICAgICAgICBpdGVtLm9wdGlvbnMubGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqW2l0ZW0ua2V5XSA9IGl0ZW0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFsdWVMaXN0Xy5wdXNoKGl0ZW0udmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHVpZCArPSBpdGVtLnZhbHVlICsgIi0iOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgb2JqWyJzaG93UHJpY2UiXSA9IHJlZ0ZlblRvWXVhbihwYXJzZUludChpdGVtLnNob3dQcmljZSkpOyAvLyDljZXkvY3liIbovazmjaLlhYPvvIzlubbmj5LlhaVza3Xku7fmoLwKCiAgICAgICAgICAgICAgICAgIG9ialsiY29zdFByaWNlIl0gPSByZWdGZW5Ub1l1YW4ocGFyc2VJbnQoaXRlbS5jb3N0UHJpY2UpKTsgLy8g5Y2V5L2N5YiG6L2s5o2i5YWD77yM5bm25o+S5YWlc2t15Lu35qC8CgogICAgICAgICAgICAgICAgICBvYmpbImNvdW50Il0gPSBwYXJzZUludChpdGVtLnRvdGFsU3RvY2tOdW0pOyAvLyDmj5LlhaXllYblk4HlupPlrZgKCiAgICAgICAgICAgICAgICAgIG9ialsic25Db2RlIl0gPSBpdGVtLnNuQ29kZTsKICAgICAgICAgICAgICAgICAgb2JqWyJjb3ZlciJdID0gaXRlbS5jb3ZlcjsKICAgICAgICAgICAgICAgICAgb2JqWyJzdGF0dXNOYW1lIl0gPSBpdGVtLnN0YXR1c05hbWU7CiAgICAgICAgICAgICAgICAgIG9ialsic3RhdHVzIl0gPSBpdGVtLnN0YXR1czsKICAgICAgICAgICAgICAgICAgb2JqWyJpZCJdID0gaXRlbS5pZDsKICAgICAgICAgICAgICAgICAgb2JqLnVpZCA9IHVpZC5zdWJzdHJpbmcoMCwgdWlkLmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgICAgICBvYmoudmFsdWVMaXN0ID0gdmFsdWVMaXN0XzsgLy8g5o+S5YWl5ZWG5ZOBdmFsdWVMaXN0CgogICAgICAgICAgICAgICAgICBza3UucHVzaChvYmopOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdGFncyA9IGZ1bmN0aW9uIHRhZ3MoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXTsKICAgICAgICAgICAgICAgICAgZ29vZHNJbmZvLnRhZ3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgICAgICAgIH07IC8vIOiuvue9ruWVhuWTgeS/oeaBrwoKCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBnb29kc0luZm8uY2xhc3NJZCwKICAgICAgICAgICAgICAgICAgLy8g5ZWG5ZOB5YiG57G7CiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBnb29kc0luZm8uZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgIC8vIOWVhuWTgeaPj+i/sAogICAgICAgICAgICAgICAgICBzZXJ2aWNlQ29udGVudDogZ29vZHNJbmZvLnNlcnZpY2VDb250ZW50LAogICAgICAgICAgICAgICAgICAvLyDmnI3liqHor6bmg4UKICAgICAgICAgICAgICAgICAgZnJlaWdodElkOiBwYXJzZUludChnb29kc0luZm8uZnJlaWdodElkKSwKICAgICAgICAgICAgICAgICAgLy8g6L+Q6LS55qih5p2/CiAgICAgICAgICAgICAgICAgIHdlaWdodDogZ29vZHNJbmZvLndlaWdodCwKICAgICAgICAgICAgICAgICAgLy8g5ZWG5ZOB5YiG57G7CiAgICAgICAgICAgICAgICAgIG5hbWU6IGdvb2RzSW5mby5uYW1lLAogICAgICAgICAgICAgICAgICAvLyDllYblk4HlkI3np7AKICAgICAgICAgICAgICAgICAgc2hvd1ByaWNlOiByZWdGZW5Ub1l1YW4oZ29vZHNJbmZvLnNob3dQcmljZSksCiAgICAgICAgICAgICAgICAgIC8vIOWVhuWTgeS7t+agvAogICAgICAgICAgICAgICAgICBjb3N0UHJpY2U6IHJlZ0ZlblRvWXVhbihnb29kc0luZm8uY29zdFByaWNlKSwKICAgICAgICAgICAgICAgICAgLy8g5ZWG5ZOB5Lu35qC8CiAgICAgICAgICAgICAgICAgIGltZ0xpc3Q6IGdvb2RzSW5mby5waWN0dXJlcy5saXN0LAogICAgICAgICAgICAgICAgICAvLyDllYblk4HkuLvlm77liJfooagKICAgICAgICAgICAgICAgICAgdGVtcG9yYXJ5SW1nTGlzdDogZ29vZHNJbmZvLnBpY3R1cmVzLmxpc3QsCiAgICAgICAgICAgICAgICAgIHZpZGVvOiBnb29kc0luZm8udmlkZW8sCiAgICAgICAgICAgICAgICAgIC8vIOWVhuWTgeinhumikQogICAgICAgICAgICAgICAgICBzcGVjaWZpY2F0aW9uc0RhdGE6IHNwZWNpZmljYXRpb25zRGF0YSwKICAgICAgICAgICAgICAgICAgLy8g5ZWG5ZOB6KeE5qC85YiX6KGoCiAgICAgICAgICAgICAgICAgIGdvb2RzUGFyYW1zOiBnb29kc0luZm8uZXh0cmFJbmZvLmxpc3QsCiAgICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ3MoKSwKICAgICAgICAgICAgICAgICAgc2t1OiBza3UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAiZ29vZHNJbmZvIiwgZ29vZHNJbmZvLmRldGFpbHMpOyAvLyDliJ3lp4vljJblr4zmlofmnKzlhoXlrrkKCiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAiaWQiLCB0aGlzLnJvdXRlRGF0YS5xdWVyeS5nb29kc0lkKTsgLy8g6K6+572u5ZWG5ZOBaWTvvIzmm7TmlrDnvJbovpHnirbmgIEKCiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEdvb2RzSW5mb0RhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRHb29kc0luZm9EYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRHb29kc0luZm9EYXRhOwogICAgfSgpLAoKICAgIC8qKg0KICAgICAqIOiOt+WPluaJgOacieWVhuWTgeWIhuexuw0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSDmiYDmnInllYblk4HliIbnsbsNCiAgICAgKi8KICAgIGdldEdvb2RzQ2F0ZWdvcnlMaXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0R29vZHNDYXRlZ29yeUxpc3QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZGF0YSwgbG9va0RhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRHb29kc0NhdGVnb3J5KHsKICAgICAgICAgICAgICAgICAgaXNBbGw6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gU1RBVFVTX0NPREUuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAvLyDpgJLlvZLmlbDnu4TvvIzljrvpmaTplb/luqbkuLow55qEY2hpbGRyZW7lrZfmrrUKICAgICAgICAgICAgICAgICAgbG9va0RhdGEgPSBmdW5jdGlvbiBsb29rRGF0YShhcnIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpdGVtLmNoaWxkcmVuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIGxvb2tEYXRhKGl0ZW0uY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICBsb29rRGF0YSh0aGlzLmdvb2RzQ2F0ZWdvcnlMaXN0ID0gZGF0YS5yZXN1bHQubGlzdCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEdvb2RzQ2F0ZWdvcnlMaXN0KCkgewogICAgICAgIHJldHVybiBfZ2V0R29vZHNDYXRlZ29yeUxpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEdvb2RzQ2F0ZWdvcnlMaXN0OwogICAgfSgpLAoKICAgIC8qKg0KICAgICAqIOiOt+WPluaJgOacieWVhuWTgeagh+etvg0KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSDmiYDmnInllYblk4HmoIfnrb4NCiAgICAgKi8KICAgIGdldEdvb2RzR3JvdXA6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRHb29kc0dyb3VwID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXFHZXRHb29kc0dyb3VwKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IFNUQVRVU19DT0RFLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5nb29kc0dyb3VwID0gZGF0YS5yZXN1bHQubGlzdDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0R29vZHNHcm91cCgpIHsKICAgICAgICByZXR1cm4gX2dldEdvb2RzR3JvdXAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEdvb2RzR3JvdXA7CiAgICB9KCksCgogICAgLyoqDQogICAgICog5Yig6Zmk6Ieq5a6a5LmJ5Y+C5pWwDQogICAgICogQHBhcmFtIHtPYmplY3R9IHZhbA0KICAgICAqIEByZXR1cm5zIHt2b2lkfQ0KICAgICAqLwogICAgZGVsR29vZHNQYXJhbXM6IGZ1bmN0aW9uIGRlbEdvb2RzUGFyYW1zKHZhbCkgewogICAgICB0aGlzLmZvcm0uZ29vZHNQYXJhbXMgPSB0aGlzLmZvcm0uZ29vZHNQYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHZhbC51aWQgIT09IGl0ZW0udWlkOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICog5re75Yqg6Ieq5a6a5LmJ5ZWG5ZOB5Y+C5pWwDQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICovCiAgICBhZGRHb29kc1BhcmFtczogZnVuY3Rpb24gYWRkR29vZHNQYXJhbXMoKSB7CiAgICAgIHRoaXMuZm9ybS5nb29kc1BhcmFtcy5wdXNoKHsKICAgICAgICB1aWQ6IHV1aWQoKSwKICAgICAgICBrZXk6ICIiLAogICAgICAgIHZhbHVlOiAiIgogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICog5L+d5a2Y5ZWG5ZOBDQogICAgICogQHBhcmFtIHtTdHJpbmd9IGdvb2RzRm9ybQ0KICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlDQogICAgICogQHJldHVybnMge3ZvaWR9DQogICAgICovCiAgICBzYXZlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2F2ZSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGdvb2RzRm9ybSwgdHlwZSkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHZhciBkYXRhLCBza3UsIHNrdUxpc3QsIG9wdGlvbnMsIHRhZ3MsIGdvb2RzUGFyYW1zU3RhdHVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0udHlwZSA9IHR5cGU7CiAgICAgICAgICAgICAgICBkYXRhID0ganNvbkRlZXBDbG9uZSh0aGlzLmZvcm0pOwogICAgICAgICAgICAgICAgc2t1ID0gdGhpcy4kcmVmcy5zcGVjaWZpY2F0aW9uc0RhdGEudGFibGVEYXRhOwogICAgICAgICAgICAgICAgc2t1TGlzdCA9IFtdOwogICAgICAgICAgICAgICAgb3B0aW9ucyA9IFtdOwogICAgICAgICAgICAgICAgZGF0YS5zcGVjaWZpY2F0aW9uc0RhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgICAgICAgICAgIGl0ZW0udHlwZS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godHlwZS5uYW1lKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAga2V5OiBpdGVtLnNwZWNpZmljYXRpb25zLAogICAgICAgICAgICAgICAgICAgIHZhbHVlczogYXJyCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7IC8vIOW+queOr+S7juWtkOe7hOS7tuaLv+WIsOeahHNrdeaehOmAoOaVsOe7hAoKICAgICAgICAgICAgICAgIHNrdS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25MaXN0ID0gW107CiAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZUxpc3QgPSBpdGVtLnZhbHVlTGlzdDsKCiAgICAgICAgICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGtleSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7fTsgLy8g5b6q546vb3B0aW9u5bCGc2t155qEa2V55ZKMb3B0aW9u5q+P5LiA6aG55a+55q+UCgogICAgICAgICAgICAgICAgICAgIHZhbHVlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIOi/h+a7pOaOieWNleinhOagvGtleeS4unVpZOaXtuWvueW6lOeahOWAvOWSjGtleemHjeWkjQogICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1ba2V5XSA9PT0gZWxlICYmIGtleSAhPT0gInVpZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmtleSA9IGtleTsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnZhbHVlID0gZWxlOwogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25MaXN0LnB1c2gob2JqKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvb3Aoa2V5KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgc2t1TGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBzaG93UHJpY2U6IHJlZ1l1YW5Ub0ZlbihpdGVtLnNob3dQcmljZSksCiAgICAgICAgICAgICAgICAgICAgY29zdFByaWNlOiByZWdZdWFuVG9GZW4oaXRlbS5jb3N0UHJpY2UpLAogICAgICAgICAgICAgICAgICAgIHRvdGFsU3RvY2tOdW06IGl0ZW0uY291bnQsCiAgICAgICAgICAgICAgICAgICAgc25Db2RlOiBpdGVtLnNuQ29kZSwKICAgICAgICAgICAgICAgICAgICBjb3ZlcjogaXRlbS5jb3ZlciwKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBvcHRpb25MaXN0IHx8IFtdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOyAvLyDmoLnmja7pgInmi6nmoIfnrb7ljLnphY3moIfnrb7lr7nosaEKCiAgICAgICAgICAgICAgICB0YWdzID0gZnVuY3Rpb24gdGFncyh2YWwpIHsKICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdOwoKICAgICAgICAgICAgICAgICAgaWYgKHZhbCAmJiB2YWwubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ29vZHNHcm91cC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmluZGV4T2YoaXRlbS5pZCkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICAgICAgICAgIH07IC8vIOiHquWumuS5ieWPguaVsOWIpOepugoKCiAgICAgICAgICAgICAgICBnb29kc1BhcmFtc1N0YXR1cyA9IGRhdGEuZ29vZHNQYXJhbXMuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWUgJiYgaXRlbS5rZXkgJiYgaXRlbS52YWx1ZS5sZW5ndGggPCAyMCAmJiBpdGVtLmtleS5sZW5ndGggPCAyMDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1tnb29kc0Zvcm1dLnZhbGlkYXRlKAogICAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcywgcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHR5cGUgPT09IF90aGlzLkRyYWZ0ICYmICFkYXRhLm5hbWUubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLor7fovpPlhaXllYblk4HlkI3np7AiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHR5cGUgPT09IF90aGlzLlJlbGVhc2UpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLllYblk4Hkv6Hmga/kuI3lrozmlbTvvIzor7floavlhpnnm7jlhbPkv6Hmga8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5mb3JtLmltZ0xpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLor7fkuIrkvKDllYblk4HkuLvlm74iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZm9ybS5zcGVjaWZpY2F0aW9uc0RhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLor7fmt7vliqDllYblk4Hop4TmoLwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNrdUxpc3Quc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0uc25Db2RlLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLor7flrozlloTop4TmoLzmmI7nu4bvvJrllYblk4HnvJbnoIHkuI3og73kuLrnqboiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5mcmVpZ2h0SWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZ01zZyhfdGhpcywgIuivt+mAieaLqei/kOi0ueaooeadvyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza3UubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLor7fkv53lrZjllYblk4Hop4TmoLzlubbloavlhpnop4TmoLzor6bnu4YiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5nb29kc0luZm8udHJpbSgpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nTXNnKF90aGlzLCAi6K+35aGr5YaZ5ZWG5ZOB6K+m5oOFIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdvb2RzUGFyYW1zU3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2coX3RoaXMsICLoh6rlrprkuYnlj4LmlbDkuI3og73kuLrnqbox5YiwMjDlrZfnrKYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCLlrZjojYnnqL8iLCBkYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPT09IF90aGlzLkRyYWZ0ID8gX3RoaXMuaXNEcmFmdCA9IHRydWUgOiBfdGhpcy5pc1JlbGVhc2UgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhLmlkIHx8IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDllYblk4FpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDllYblk4HlkI3np7AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0lkOiBkYXRhLmNhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWVhuWTgeWIhuexuwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dQcmljZTogcmVnWXVhblRvRmVuKHRvRGVjaW1hbDIoZGF0YS5zaG93UHJpY2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlsZXnpLrku7fmoLwo5ZWG5ZOB5Lu35qC8KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc3RQcmljZTogcmVnWXVhblRvRmVuKHRvRGVjaW1hbDIoZGF0YS5jb3N0UHJpY2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlrp7pmYXllK7ljZbku7fmoLzvvIzpooTnlZkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWN0dXJlczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6L2u5pKt5Zu+77yM56ys5LiA5byg5Li65Li75Zu+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBkYXRhLmltZ0xpc3QgfHwgW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiBkYXRhLnZpZGVvIHx8IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDop4bpopHvvIzpooTnlZkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBkYXRhLmdvb2RzSW5mbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDllYblk4Hor6bmg4Uo5a+M5paH5pysKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeKtuaAgS7mlrDlop7llYblk4HnmoTml7blgJnlj6rlhYHorrjmlrDlop7ojYnnqL/lkozkuIrmnrbnirbmgIHjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFN0b2NrTnVtOiBkYXRhLnRvdGFsU3RvY2tOdW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5oC75bqT5a2YCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5o+P6L+wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUNvbnRlbnQ6IGRhdGEuc2VydmljZUNvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5oC75bqT5a2YCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlaWdodElkOiBkYXRhLmZyZWlnaHRJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDov5DotLnmqKHmnb8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IHBhcnNlSW50KGRhdGEud2VpZ2h0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDllYblk4Hph43ph48KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzOiB0YWdzKGRhdGEudGFncyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5ZWG5ZOB5qCH562+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5ZWG5ZOB55qE5omA5pyJ6KeE5qC8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBvcHRpb25zIHx8IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYUluZm86IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWVhuWTgemineWkluiHquWumuS5ieWPguaVsAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogZGF0YS5nb29kc1BhcmFtcyB8fCBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2t1czogc2t1TGlzdCB8fCBbXSAvLyBTS1XliJfooagKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUdvb2RzKHBhcmFtcyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRHJhZnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNSZWxlYXNlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLmNvZGUgIT09IFNUQVRVU19DT0RFLnN1Y2Nlc3MpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNnKF90aGlzLCByZXNwb25zZS5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc01zZyhfdGhpcywgIiIuY29uY2F0KGRhdGEuaWQgPyAi57yW6L6R5oiQ5YqfIiA6ICLliJvlu7rmiJDlip8iKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRyb3V0ZXIucmVwbGFjZShfdGhpcy5yb3V0ZURhdGEucXVlcnkucGF0aF8pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNhdmUoX3gsIF94MikgewogICAgICAgIHJldHVybiBfc2F2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2F2ZTsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["/Users/caijianli/Desktop/malladmin/src/views/container/goodsManage/createGoods/controller/index.js"],"names":["mapState","draggable","warningMsg","successMsg","uuid","jsonDeepClone","STATUS_CODE","regYuanToFen","errorMsg","regFenToYuan","toDecimal2","createGoods","getGoodsInfo","CollapseTransition","GoodsSpecifications","editor","getGoodsCategory","reqGetGoodsGroup","imageUpload","name","data","validatePrice","rule","value","callback","Error","test","checkWeight","validateTags","length","Draft","goodsDraft","Release","goodsRelease","goodsGroup","goodsCategoryList","show1","show2","show3","drag","transf","id","form","category","costPrice","showPrice","description","serviceContent","freightId","weight","temporaryImgList","imgList","tags","video","specificationsData","goodsInfo","goodsParams","key","sku","loading","faceList","editorContent","FILE_TYPE_AVATAR","process","env","VUE_APP_FILE_TYPE_AVATAR","SUCC_CODE","VUE_APP_BASE_SUCC_CODE","ERR_TOKEN_CODE","VUE_APP_BASE_ERR_TOKEN_CODE","rules","required","message","trigger","min","max","validator","isDraft","isRelease","goodsInfoOrigin","dialogVisible","isLoading","editLayout","width","height","components","created","getGoodsInfoData","getGoodsCategoryList","getGoodsGroup","computed","isEdit","Boolean","routeData","query","goodsId","$route","dragOptions","animation","group","disabled","ghostClass","goodsParamsNew","slice","methods","params","code","success","msg","result","goods","options","list","forEach","item","arr","values","push","specifications","type","skus","obj","uid","valueList_","parseInt","totalStockNum","snCode","cover","statusName","status","substring","valueList","classId","pictures","extraInfo","$set","details","isAll","lookData","children","undefined","delGoodsParams","val","filter","addGoodsParams","save","goodsForm","$refs","tableData","skuList","optionList","ele","count","indexOf","goodsParamsStatus","every","validate","valid","some","trim","console","info","response","setTimeout","$router","replace","path_"],"mappings":"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","sourcesContent":["/**\r\n *  Created by wangAlen on 2019-11-12 11:49\r\n */\r\nimport { mapState } from \"vuex\";\r\nimport draggable from \"vuedraggable\";\r\nimport {\r\n  warningMsg,\r\n  successMsg,\r\n  uuid,\r\n  jsonDeepClone,\r\n  STATUS_CODE,\r\n  regYuanToFen,\r\n  errorMsg,\r\n  regFenToYuan,\r\n  toDecimal2\r\n} from \"@/commonutils/common\";\r\nimport { createGoods, getGoodsInfo } from \"./request\";\r\nimport CollapseTransition from \"element-ui/lib/transitions/collapse-transition\";\r\nimport GoodsSpecifications from \"../../goodsSpecifications/goodsSpecifications\";\r\nimport editor from \"@/components/editor\";\r\nimport { getGoodsCategory } from \"../../../goodsCategory/request\";\r\nimport { reqGetGoodsGroup } from \"../../../goodsGroup/request\";\r\nimport imageUpload from \"@/components/imageUpload\";\r\n\r\nexport default {\r\n  name: \"CreateGoods\",\r\n  data() {\r\n    /**\r\n     * 商品价格正则过滤\r\n     * @param {Object} rule\r\n     * @param {Object} value\r\n     * @param {Object} callback\r\n     * @returns {Object} callback\r\n     */\r\n    let validatePrice = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入价格\"));\r\n      } else if (value <= 0 || !/^[0-9]+(.[0-9]{1,5})?$/.test(value)) {\r\n        callback(new Error(\"价格不合法，请重新输入\"));\r\n      } else if (value > 99999) {\r\n        callback(new Error(\"价格不合法，请重新输入\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    let checkWeight = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"重量不能为空\"));\r\n      }\r\n      if (value <= 0 || !/^[0-9]+(.[0-9]{1,5})?$/.test(value)) {\r\n        callback(new Error(\"重量不合法，请重新输入\"));\r\n      } else {\r\n        if (value > 9999) {\r\n          callback(new Error(\"重量不合法，请重新输入\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      }\r\n    };\r\n    let validateTags = (rule, value, callback) => {\r\n      if (!value.length) {\r\n        return callback(new Error(\"请选择商品标签\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      Draft: STATUS_CODE.goodsDraft,\r\n      Release: STATUS_CODE.goodsRelease,\r\n      goodsGroup: [],\r\n      goodsCategoryList: [],\r\n      show1: true,\r\n      show2: true,\r\n      show3: true,\r\n      drag: false,\r\n      transf: [\r\n        {\r\n          name: \"包邮\",\r\n          id: 1\r\n        }\r\n      ],\r\n      form: {\r\n        category: \"\", // 商品分类\r\n        name: \"\", // 商品名称\r\n        costPrice: \"\", // 商品售卖价格\r\n        showPrice: \"\", // 商品展示价格\r\n        description: \"\", // 商品描述\r\n        serviceContent: \"\", // 服务说明\r\n        freightId: \"\", // 运费模板\r\n        weight: \"\", // 物流重量\r\n        temporaryImgList: [],\r\n        imgList: [], // 商品主图列表\r\n        tags: [], // 商品标签\r\n        video: \"\", // 商品视频\r\n        specificationsData: [], // 商品规格列表\r\n        goodsInfo: \"\", // 商品富文本\r\n        goodsParams: [\r\n          {\r\n            key: \"品牌\",\r\n            value: \"\"\r\n          },\r\n          {\r\n            key: \"型号\",\r\n            value: \"\"\r\n          }\r\n        ],\r\n        sku: []\r\n      },\r\n      loading: false,\r\n      faceList: [],\r\n      editorContent: \"\",\r\n      FILE_TYPE_AVATAR: process.env.VUE_APP_FILE_TYPE_AVATAR,\r\n      SUCC_CODE: process.env.VUE_APP_BASE_SUCC_CODE,\r\n      ERR_TOKEN_CODE: process.env.VUE_APP_BASE_ERR_TOKEN_CODE,\r\n      rules: {\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: \"请输入商品名称\",\r\n            trigger: [\"change\"]\r\n          },\r\n          {\r\n            min: 2,\r\n            max: 50,\r\n            message: \"长度在 2 到 50 个字符\",\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        category: [\r\n          { required: true, message: \"请选择商品分类\", trigger: \"change\" }\r\n        ],\r\n        freightId: [\r\n          { required: true, message: \"请选择运费模板\", trigger: \"change\" }\r\n        ],\r\n        costPrice: [\r\n          {\r\n            validator: validatePrice,\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        showPrice: [\r\n          {\r\n            validator: validatePrice,\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        tags: [\r\n          {\r\n            validator: validateTags,\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        weight: [\r\n          {\r\n            validator: checkWeight,\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      },\r\n      isDraft: false,\r\n      isRelease: false,\r\n      goodsInfoOrigin: {},\r\n      dialogVisible: false,\r\n      isLoading: false,\r\n      editLayout: {\r\n        width: \"100%\",\r\n        height: \"400px\"\r\n      }\r\n    };\r\n  },\r\n  // beforeRouteLeave(to, from, next) {\r\n  //   this.$confirm(\"表单数据未保存，你确定要离开吗?\", \"提示\", {\r\n  //     confirmButtonText: \"确定\",\r\n  //     cancelButtonText: \"取消\"\r\n  //   })\r\n  //     .then(() => {\r\n  //       next();\r\n  //     })\r\n  //     .catch(() => {\r\n  //       next(false);\r\n  //     });\r\n  // },\r\n  components: {\r\n    draggable,\r\n    CollapseTransition,\r\n    GoodsSpecifications,\r\n    editor,\r\n    imageUpload\r\n  },\r\n  created() {\r\n    this.getGoodsInfoData();\r\n    this.getGoodsCategoryList();\r\n    this.getGoodsGroup();\r\n  },\r\n  computed: {\r\n    ...mapState([\"user\", \"aliyunOss\"]),\r\n    /**\r\n     * 是否可编辑\r\n     * @returns {boolean} 编辑状态\r\n     */\r\n    isEdit() {\r\n      return Boolean(this.routeData.query.goodsId);\r\n    },\r\n    /**\r\n     * 路由信息\r\n     * @returns {Route} 路由信息\r\n     */\r\n    routeData() {\r\n      return this.$route;\r\n    },\r\n    /**\r\n     * 拖拽\r\n     * @returns {{ghostClass: string, disabled: boolean, animation: number, group: string}} 拖拽信息\r\n     */\r\n    dragOptions() {\r\n      return {\r\n        animation: 500,\r\n        group: \"description\",\r\n        disabled: false,\r\n        ghostClass: \"ghost\"\r\n      };\r\n    },\r\n    /**\r\n     * 新增商品参数\r\n     * @returns {Array} 新增商品参数\r\n     */\r\n    goodsParamsNew() {\r\n      if (this.form.goodsParams.length >= 3) {\r\n        return this.form.goodsParams.slice(2);\r\n      } else {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 根据路由id查询商品详情\r\n     * @returns {Promise<void>} goodsInfo\r\n     */\r\n    async getGoodsInfoData() {\r\n      const params = this.routeData.query;\r\n      // 判断是否为编辑状态\r\n      if (!params.goodsId) {\r\n        // 根据编辑状态设置title\r\n        // this.$route.meta.title = \"创建商品\";\r\n        return;\r\n      }\r\n      this.isLoading = true;\r\n      // this.$route.meta.title = \"编辑商品\";\r\n      // 请求商品详情数据\r\n      const data = await getGoodsInfo({ id: params.goodsId });\r\n      if (data.code !== STATUS_CODE.success) {\r\n        errorMsg(this, data.msg);\r\n        return;\r\n      }\r\n      this.goodsInfoOrigin = jsonDeepClone(data.result.goods); // 备份原始数据\r\n      const goodsInfo = data.result.goods;\r\n      const sku = [];\r\n      const specificationsData = [];\r\n      // 按照编辑格式来格式化规格列表\r\n      goodsInfo.options.list.forEach(item => {\r\n        let arr = [];\r\n        item.values.forEach(item => {\r\n          arr.push({\r\n            name: item,\r\n            id: uuid()\r\n          });\r\n        });\r\n        specificationsData.push({\r\n          specifications: item.key,\r\n          id: uuid(),\r\n          type: arr\r\n        });\r\n      });\r\n      // 格式化返回Sku数据\r\n      goodsInfo.skus.forEach(item => {\r\n        let obj = {};\r\n        let uid = \"\";\r\n        let valueList_ = [];\r\n        // 循环sku value list并插入uid，valueList_\r\n        item.options.list.forEach(item => {\r\n          obj[item.key] = item.value;\r\n          valueList_.push(item.value);\r\n          uid += item.value + \"-\";\r\n        });\r\n        obj[\"showPrice\"] = regFenToYuan(parseInt(item.showPrice)); // 单位分转换元，并插入sku价格\r\n        obj[\"costPrice\"] = regFenToYuan(parseInt(item.costPrice)); // 单位分转换元，并插入sku价格\r\n        obj[\"count\"] = parseInt(item.totalStockNum); // 插入商品库存\r\n        obj[\"snCode\"] = item.snCode;\r\n        obj[\"cover\"] = item.cover;\r\n        obj[\"statusName\"] = item.statusName;\r\n        obj[\"status\"] = item.status;\r\n        obj[\"id\"] = item.id;\r\n        obj.uid = uid.substring(0, uid.length - 1);\r\n        obj.valueList = valueList_; // 插入商品valueList\r\n        sku.push(obj);\r\n      });\r\n      const tags = () => {\r\n        const arr = [];\r\n        goodsInfo.tags.forEach(item => {\r\n          arr.push(item.id);\r\n        });\r\n        return arr;\r\n      }\r\n      // 设置商品信息\r\n      this.form = {\r\n        category: goodsInfo.classId, // 商品分类\r\n        description: goodsInfo.description, // 商品描述\r\n        serviceContent: goodsInfo.serviceContent, // 服务详情\r\n        freightId: parseInt(goodsInfo.freightId), // 运费模板\r\n        weight: goodsInfo.weight, // 商品分类\r\n        name: goodsInfo.name, // 商品名称\r\n        showPrice: regFenToYuan(goodsInfo.showPrice), // 商品价格\r\n        costPrice: regFenToYuan(goodsInfo.costPrice), // 商品价格\r\n        imgList: goodsInfo.pictures.list, // 商品主图列表\r\n        temporaryImgList: goodsInfo.pictures.list,\r\n        video: goodsInfo.video, // 商品视频\r\n        specificationsData: specificationsData, // 商品规格列表\r\n        goodsParams: goodsInfo.extraInfo.list,\r\n        tags: tags(),\r\n        sku: sku\r\n      };\r\n      this.$set(this.form, \"goodsInfo\", goodsInfo.details); // 初始化富文本内容\r\n      this.$set(this.form, \"id\", this.routeData.query.goodsId); // 设置商品id，更新编辑状态\r\n      this.isLoading = false;\r\n    },\r\n    /**\r\n     * 获取所有商品分类\r\n     * @returns {Promise<void>} 所有商品分类\r\n     */\r\n    async getGoodsCategoryList() {\r\n      const data = await getGoodsCategory({\r\n        isAll: true\r\n      });\r\n      if (data.code === STATUS_CODE.success) {\r\n        // 递归数组，去除长度为0的children字段\r\n        const lookData = arr => {\r\n          if (arr.length) {\r\n            arr.forEach(item => {\r\n              if (!item.children.length) {\r\n                delete item.children;\r\n              } else {\r\n                lookData(item.children);\r\n              }\r\n            });\r\n          }\r\n        };\r\n        lookData((this.goodsCategoryList = data.result.list));\r\n      }\r\n    },\r\n    /**\r\n     * 获取所有商品标签\r\n     * @returns {Promise<void>} 所有商品标签\r\n     */\r\n    async getGoodsGroup() {\r\n      const data = await reqGetGoodsGroup(undefined, undefined, true);\r\n      if (data.code === STATUS_CODE.success) {\r\n        this.goodsGroup = data.result.list;\r\n      }\r\n    },\r\n    /**\r\n     * 删除自定义参数\r\n     * @param {Object} val\r\n     * @returns {void}\r\n     */\r\n    delGoodsParams(val) {\r\n      this.form.goodsParams = this.form.goodsParams.filter(\r\n        item => val.uid !== item.uid\r\n      );\r\n    },\r\n    /**\r\n     * 添加自定义商品参数\r\n     * @returns {void}\r\n     */\r\n    addGoodsParams() {\r\n      this.form.goodsParams.push({\r\n        uid: uuid(),\r\n        key: \"\",\r\n        value: \"\"\r\n      });\r\n    },\r\n    /**\r\n     * 保存商品\r\n     * @param {String} goodsForm\r\n     * @param {number} type\r\n     * @returns {void}\r\n     */\r\n    async save(goodsForm, type) {\r\n      this.form.type = type;\r\n      const data = jsonDeepClone(this.form);\r\n      const sku = this.$refs.specificationsData.tableData;\r\n      const skuList = [];\r\n      const options = [];\r\n      data.specificationsData.forEach(item => {\r\n        let arr = [];\r\n        item.type.forEach(type => {\r\n          arr.push(type.name);\r\n        });\r\n        options.push({\r\n          key: item.specifications,\r\n          values: arr\r\n        });\r\n      });\r\n      // 循环从子组件拿到的sku构造数组\r\n      sku.forEach(item => {\r\n        let optionList = [];\r\n        let valueList = item.valueList;\r\n        for (let key in item) {\r\n          let obj = {};\r\n          // 循环option将sku的key和option每一项对比\r\n          valueList.forEach(ele => {\r\n            // 过滤掉单规格key为uid时对应的值和key重复\r\n            if (item[key] === ele && key !== \"uid\") {\r\n              obj.key = key;\r\n              obj.value = ele;\r\n              optionList.push(obj);\r\n            }\r\n          });\r\n        }\r\n        skuList.push({\r\n          showPrice: regYuanToFen(item.showPrice),\r\n          costPrice: regYuanToFen(item.costPrice),\r\n          totalStockNum: item.count,\r\n          snCode: item.snCode,\r\n          cover: item.cover,\r\n          options: {\r\n            list: optionList || []\r\n          }\r\n        });\r\n      });\r\n      // 根据选择标签匹配标签对象\r\n      const tags = val => {\r\n        const arr = [];\r\n        if (val && val.length) {\r\n          this.goodsGroup.forEach(item => {\r\n            if (val.indexOf(item.id) >= 0) {\r\n              arr.push(item);\r\n            }\r\n          });\r\n        }\r\n        return arr;\r\n      };\r\n      // 自定义参数判空\r\n      const goodsParamsStatus = data.goodsParams.every(item => {\r\n        return (\r\n          item.value &&\r\n          item.key &&\r\n          item.value.length < 20 &&\r\n          item.key.length < 20\r\n        );\r\n      });\r\n      this.$refs[goodsForm].validate(async valid => {\r\n        if (type === this.Draft && !data.name.length) {\r\n          warningMsg(this, \"请输入商品名称\");\r\n          return false;\r\n        } else if (type === this.Release) {\r\n          if (!valid) {\r\n            warningMsg(this, \"商品信息不完整，请填写相关信息\");\r\n            return false;\r\n          }\r\n          if (!this.form.imgList.length) {\r\n            warningMsg(this, \"请上传商品主图\");\r\n            return false;\r\n          }\r\n          if (!this.form.specificationsData.length) {\r\n            warningMsg(this, \"请添加商品规格\");\r\n            return false;\r\n          }\r\n          if (\r\n            skuList.some(item => {\r\n              return !item.snCode.trim();\r\n            })\r\n          ) {\r\n            warningMsg(this, \"请完善规格明细：商品编码不能为空\");\r\n            return false;\r\n          }\r\n          if (!data.freightId) {\r\n            warningMsg(this, \"请选择运费模板\");\r\n            return false;\r\n          }\r\n          if (!sku.length) {\r\n            warningMsg(this, \"请保存商品规格并填写规格详细\");\r\n            return false;\r\n          }\r\n          if (!data.goodsInfo.trim().length) {\r\n            warningMsg(this, \"请填写商品详情\");\r\n            return false;\r\n          }\r\n          if (!goodsParamsStatus) {\r\n            warningMsg(this, \"自定义参数不能为空1到20字符\");\r\n            return false;\r\n          }\r\n        } else {\r\n          // eslint-disable-next-line no-console\r\n          console.info(\"存草稿\", data);\r\n        }\r\n        type === this.Draft ? (this.isDraft = true) : (this.isRelease = true);\r\n        const params = {\r\n          goods: {\r\n            id: data.id || undefined, // 商品id\r\n            name: data.name, // 商品名称\r\n            classId: data.category, // 商品分类\r\n            showPrice: regYuanToFen(toDecimal2(data.showPrice)), // 展示价格(商品价格)\r\n            costPrice: regYuanToFen(toDecimal2(data.costPrice)), // 实际售卖价格，预留\r\n            pictures: {\r\n              // 轮播图，第一张为主图\r\n              list: data.imgList || []\r\n            },\r\n            video: data.video || undefined, // 视频，预留\r\n            details: data.goodsInfo, // 商品详情(富文本)\r\n            status: data.type, // 状态.新增商品的时候只允许新增草稿和上架状态。\r\n            totalStockNum: data.totalStockNum, // 总库存\r\n            description: data.description, // 描述\r\n            serviceContent: data.serviceContent, // 总库存\r\n            freightId: data.freightId, // 运费模板\r\n            weight: parseInt(data.weight), // 商品重量\r\n            tags: tags(data.tags), // 商品标签\r\n            options: {\r\n              // 商品的所有规格\r\n              list: options || []\r\n            },\r\n            extraInfo: {\r\n              // 商品额外自定义参数\r\n              list: data.goodsParams || []\r\n            },\r\n            skus: skuList || [] // SKU列表\r\n          }\r\n        };\r\n        const response = await createGoods(params);\r\n        setTimeout(() => {\r\n          this.isDraft = false;\r\n          this.isRelease = false;\r\n        }, 500);\r\n        if (response.code !== STATUS_CODE.success) {\r\n          errorMsg(this, response.msg);\r\n          return;\r\n        }\r\n        successMsg(this, `${data.id ? \"编辑成功\" : \"创建成功\"}`);\r\n        await this.$router.replace(this.routeData.query.path_);\r\n      });\r\n    }\r\n  }\r\n};\r\n"]}]}